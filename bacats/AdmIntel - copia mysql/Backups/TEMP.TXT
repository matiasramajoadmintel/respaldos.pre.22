/* View: VW_TRABAJOS, Owner: SYSDBA */

CREATE VIEW VW_TRABAJOS (
  IDTRABAJO, 
  NRO_PEDIDO, 
  IDDEPARTAMENTO, 
  FECHA_INI, 
  FECHA_FIN, 
  RAZON_SOCIAL, 
  COSTO, 
  IMPUTACION, 
  DESCRIP, 
  IDEDIF, 
  TIPO_PAGO
) AS

SELECT Trabajo.IDTRABAJO, Trabajo.NRO_PEDIDO, Trab_depto.IDDEPARTAMENTO, Trabajo.FECHA_INI, Trabajo.FECHA_FIN, Proveedor.RAZON_SOCIAL, Trabajo.COSTO, Trabajo.IMPUTACION, Categoria.DESCRIP, Depto_edif.IDEDIF, Trabajo.TIPO_PAGO
FROM TRABAJO Trabajo
   INNER JOIN TRAB_DEPTO Trab_depto
   ON  (Trabajo.IDTRABAJO = Trab_depto.IDTRABAJO)
   LEFT OUTER JOIN PROVEEDOR Proveedor
   ON  (Trabajo.IDPROVEEDOR = Proveedor.IDPROVEEDOR)
   LEFT OUTER JOIN CATEGORIA Categoria
   ON  (Trabajo.IDCATEGORIA = Categoria.IDCATEGORIA)
   INNER JOIN DEPTO_EDIF Depto_edif
   ON  (Trab_depto.IDDEPARTAMENTO = Depto_edif.IDDEPTO)
;


*************************************



/* View: VW_CHEQUES, Owner: SYSDBA */

CREATE VIEW VW_CHEQUES (
  IDPROVEEDOR, 
  PROVEEDOR, 
  IMPORTE
) AS

SELECT GASTO_AD.IDPROVEEDOR, Proveedor.RAZON_SOCIAL, SUM( Gasto_ad.COSTO )
FROM GASTO_AD Gasto_ad
   LEFT OUTER JOIN PROVEEDOR Proveedor
   ON  (Gasto_ad.IDPROVEEDOR = Proveedor.IDPROVEEDOR)
WHERE  Gasto_ad.TIPO_PAGO = 'C' AND NRO_CHEQUE IS NULL
GROUP BY GASTO_AD.IDPROVEEDOR, Proveedor.RAZON_SOCIAL
UNION
SELECT SERV_EDIF.IDPROVEEDOR, Proveedor.RAZON_SOCIAL, SUM( SERV_EDIF.COSTO )
FROM SERV_EDIF
   LEFT OUTER JOIN PROVEEDOR Proveedor
   ON  (SERV_EDIF.IDPROVEEDOR = Proveedor.IDPROVEEDOR)
WHERE  SERV_EDIF.TIPO_PAGO = 'C' AND NRO_CHEQUE IS NULL
GROUP BY SERV_EDIF.IDPROVEEDOR, Proveedor.RAZON_SOCIAL
UNION
SELECT TRABAJO.IDPROVEEDOR, Proveedor.RAZON_SOCIAL, SUM( TRABAJO.COSTO )
FROM TRABAJO
   LEFT OUTER JOIN PROVEEDOR Proveedor
   ON  (TRABAJO.IDPROVEEDOR = Proveedor.IDPROVEEDOR)
WHERE  TRABAJO.TIPO_PAGO = 'C' AND NRO_CHEQUE IS NULL
GROUP BY TRABAJO.IDPROVEEDOR, Proveedor.RAZON_SOCIAL
;

*********************************************

CREATE VIEW VW_GASTO_AD (
  IDGASTO_AD, 
  FECHA_PAGO, 
  COSTO, 
  DESCRIP, 
  IDTIPO_GASTO_AD, 
  TIPO_PAGO, 
  NRO_CHEQUE, 
  IDPROVEEDOR, 
  RAZON_SOCIAL, 
  PAGADO
) AS

SELECT GASTO_AD.IDGASTO_AD, GASTO_AD.FECHA_PAGO, GASTO_AD.COSTO, TIPO_GASTO_AD.DESCRIP,
GASTO_AD.IDTIPO_GASTO_AD, GASTO_AD.TIPO_PAGO, GASTO_AD.NRO_CHEQUE, GASTO_AD.IDPROVEEDOR,
Proveedor.RAZON_SOCIAL, GASTO_AD.PAGADO
FROM GASTO_AD
   INNER JOIN TIPO_GASTO_AD
   ON  (GASTO_AD.IDTIPO_GASTO_AD = TIPO_GASTO_AD.IDTIPO_GASTO_AD)
   LEFT OUTER JOIN PROVEEDOR Proveedor
   ON  (GASTO_AD.IDPROVEEDOR = Proveedor.IDPROVEEDOR)
;

***************************************

CREATE VIEW VW_SERV_EDIF (
  IDEDIFICIO, 
  FECHA_PAGO, 
  COSTO, 
  DESCRIP, 
  IDSERVICIO, 
  TIPO_PAGO, 
  NRO_CHEQUE, 
  IDPROVEEDOR, 
  RAZON_SOCIAL, 
  IDSERV_EDIF, 
  PAGADO
) AS

SELECT Serv_edif.IDEDIFICIO, Serv_edif.FECHA_PAGO, Serv_edif.COSTO, Servicio.DESCRIP, Serv_edif.IDSERVICIO, Serv_edif.TIPO_PAGO, Serv_edif.NRO_CHEQUE, Serv_edif.IDPROVEEDOR, Proveedor.RAZON_SOCIAL, SERV_EDIF.IDSERV_EDIF, SERV_EDIF.PAGADO
FROM SERV_EDIF Serv_edif
   INNER JOIN SERVICIO Servicio
   ON  (Serv_edif.IDSERVICIO = Servicio.IDSERVICIO)
   LEFT OUTER JOIN PROVEEDOR Proveedor
   ON  (Serv_edif.IDPROVEEDOR = Proveedor.IDPROVEEDOR)
;