DROP VIEW VW_TRABAJOS;

CREATE VIEW VW_TRABAJOS (
  IDTRABAJO,
  NRO_PEDIDO,
  IDDEPARTAMENTO,
  FECHA_INI,
  FECHA_FIN,
  RAZON_SOCIAL,
  COSTO,
  IMPUTACION,
  DESCRIP,
  IDEDIF,
  TIPO_PAGO,
  NRO_CHEQUE,
  PAGADO,
  NRO_FACTURA,
  EDIFICIO,
  DESC_DEPTO,
  NRO_DECI,
  NRO_ORDEN
) AS

SELECT Trabajo.IDTRABAJO, Trabajo.NRO_PEDIDO, Trab_depto.IDDEPARTAMENTO, Trabajo.FECHA_INI, Trabajo.FECHA_FIN, Proveedor.RAZON_SOCIAL, Trabajo.COSTO, Trabajo.IMPUTACION, Categoria.DESCRIP, Depto_edif.IDEDIF, Pago.TIPO_PAGO, Pago.NRO_CHEQUE, Trabajo.PAGADO, Trabajo.NRO_FACTURA, EDIFICIOS.DESCRIP,
Edificios.DESCRIP || '  ' || DEPTO_EDIF.DESCRIP, TRABAJO.NRO_DECI, TRABAJO.NRO_ORDEN
FROM TRABAJO Trabajo
   INNER JOIN TRAB_DEPTO Trab_depto
   ON  (Trabajo.IDTRABAJO = Trab_depto.IDTRABAJO)
   LEFT OUTER JOIN PROVEEDOR Proveedor
   ON  (Trabajo.IDPROVEEDOR = Proveedor.IDPROVEEDOR)
   LEFT OUTER JOIN CATEGORIA Categoria
   ON  (Trabajo.IDCATEGORIA = Categoria.IDCATEGORIA)
   LEFT OUTER JOIN PAGO Pago
   ON  (Trabajo.IDPAGO = Pago.IDPAGO)
   INNER JOIN DEPTO_EDIF Depto_edif
   ON  (Trab_depto.IDDEPARTAMENTO = Depto_edif.IDDEPTO)
   INNER JOIN EDIFICIOS Edificios
   ON  (Depto_edif.IDEDIF = Edificios.IDEDIFICIO)
;

DROP VIEW VW_TRAB_EDIF;

CREATE VIEW VW_TRAB_EDIF (
  IDTRABAJO,
  NRO_PEDIDO,
  FECHA_INI,
  FECHA_FIN,
  COSTO,
  IMPUTACION,
  IDEDIFICIO,
  ESPACIO,
  RAZON_SOCIAL,
  NRO_FACTURA,
  DESCRIP,
  EDIFICIO,
  PAGADO,
  NRO_DECI,
  NRO_ORDEN
) AS

SELECT Trabajo.IDTRABAJO, Trabajo.NRO_PEDIDO, Trabajo.FECHA_INI, Trabajo.FECHA_FIN, Trabajo.COSTO, Trabajo.IMPUTACION, Trab_edif.IDEDIFICIO, Tipo_espacio.DESCRIP, Proveedor.RAZON_SOCIAL, Trabajo.NRO_FACTURA, Categoria.DESCRIP, Edificios.DESCRIP, TRABAJO.PAGADO, TRABAJO.NRO_DECI, TRABAJO.NRO_ORDEN
FROM TRABAJO Trabajo
   INNER JOIN TRAB_EDIF Trab_edif
   ON  (Trabajo.IDTRABAJO = Trab_edif.IDTRABAJO)
   LEFT OUTER JOIN PROVEEDOR Proveedor
   ON  (Trabajo.IDPROVEEDOR = Proveedor.IDPROVEEDOR)
   INNER JOIN CATEGORIA Categoria
   ON  (Trabajo.IDCATEGORIA = Categoria.IDCATEGORIA)
   INNER JOIN TIPO_ESPACIO Tipo_espacio
   ON  (Trab_edif.IDTIPO_ESPACIO = Tipo_espacio.IDTIPO_ESPACIO)
   INNER JOIN EDIFICIOS Edificios
   ON  (Trab_edif.IDEDIFICIO = Edificios.IDEDIFICIO)
;